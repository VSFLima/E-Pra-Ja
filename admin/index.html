<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel do Gestor - E-Pra-Já</title>

    <link rel="stylesheet" href="../assets/css/style.css?v=4.1">
    <link rel="stylesheet" href="../assets/css/panel.css?v=4.1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
</head>
<body class="panel-body">

    <!-- BARRA LATERAL (MENU GAVETA) -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <a href="index.html" class="logo">
                <img src="../assets/images/logo.svg" alt="Logo E-Pra Já">
            </a>
        </div>
        <nav class="sidebar-nav">
            <ul>
                <li><a href="#dashboard" class="active"><i class="fa-solid fa-chart-line icon"></i><span>Dashboard</span></a></li>
                <li><a href="#restaurantes"><i class="fa-solid fa-store icon"></i><span>Restaurantes</span></a></li>
                <li><a href="#usuarios"><i class="fa-solid fa-users icon"></i><span>Usuários</span></a></li>
                <li><a href="enviar-mensagem.html"><i class="fa-solid fa-paper-plane icon"></i><span>Mensagens</span></a></li>
            </ul>
        </nav>
        <div class="sidebar-footer">
             <a href="#" id="btn-logout"><i class="fa-solid fa-right-from-bracket icon"></i><span>Sair</span></a>
        </div>
    </aside>

    <!-- WRAPPER PRINCIPAL PARA O CONTEÚDO -->
    <div class="main-wrapper">
        <!-- CABEÇALHO SUPERIOR MÓVEL -->
        <header class="mobile-header">
            <button class="menu-toggle" id="menu-toggle">
                <i class="fas fa-bars"></i>
            </button>
            <a href="index.html" class="logo">
                <img src="../assets/images/logo.svg" alt="Logo E-Pra Já">
            </a>
        </header>

        <!-- CONTEÚDO PRINCIPAL -->
        <main class="main-content">
            <header class="page-header">
                <h1>Dashboard do Gestor</h1>
                <p>Bem-vindo, <strong id="nome-utilizador">admin</strong>.</p>
            </header>

            <!-- DASHBOARD FINANCEIRO -->
            <section id="dashboard" class="metric-cards">
                <div class="metric-card">
                    <i class="fa-solid fa-dollar-sign icon"></i>
                    <div class="info">
                        <div id="total-arrecadado" class="number">R$ 0,00</div>
                        <div class="label">Total Arrecadado (Mês)</div>
                    </div>
                </div>
                <div class="metric-card">
                    <i class="fa-solid fa-clock-rotate-left icon"></i>
                    <div class="info">
                        <div id="total-pendente" class="number">R$ 0,00</div>
                        <div class="label">Total Pendente</div>
                    </div>
                </div>
                <div class="metric-card">
                    <i class="fa-solid fa-hourglass-start icon"></i>
                    <div class="info">
                        <div id="total-em-teste" class="number">R$ 0,00</div>
                        <div class="label">Potencial (Em Teste)</div>
                    </div>
                </div>
            </section>

            <!-- CONTROLE FINANCEIRO -->
            <section class="dashboard-card">
                <div class="card-header"><h3>Controle Financeiro</h3></div>
                <div class="management-form">
                    <div style="grid-column: 1 / -1;">
                        <h4>Solicitações de Desbloqueio por Confiança</h4>
                        <div class="table-wrapper">
                            <table class="data-table">
                                <thead><tr><th>Restaurante</th><th>ID do Dono</th><th>Ação</th></tr></thead>
                                <tbody id="desbloqueio-body"></tbody>
                            </table>
                        </div>
                    </div>
                    <div style="grid-column: 1 / -1;">
                        <h4>Restaurantes com Pagamento Pendente</h4>
                         <div class="table-wrapper">
                            <table class="data-table">
                                <thead><tr><th>Restaurante</th><th>Acesso Válido Até</th></tr></thead>
                                <tbody id="pendentes-body"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <!-- GESTÃO DE RESTAURANTES -->
            <section id="restaurantes" class="dashboard-card">
                <div class="card-header">
                    <h3>Gerenciar Restaurantes</h3>
                    <a href="gerenciar-restaurante.html" class="btn btn-primario">Criar Novo Restaurante</a>
                </div>
                <div class="table-wrapper">
                    <table class="data-table">
                        <thead><tr><th>Nome</th><th>Status</th><th>Pagamento</th><th>Ações</th></tr></thead>
                        <tbody id="lista-restaurantes-body"></tbody>
                    </table>
                </div>
            </section>

            <!-- GESTÃO DE USUÁRIOS -->
            <section id="usuarios" class="dashboard-card">
                <div class="card-header"><h3>Gerenciar Usuários</h3></div>
                <div class="table-wrapper">
                    <table class="data-table">
                        <thead><tr><th>E-mail</th><th>Nome</th><th>Perfil</th><th>Status</th><th>Ações</th></tr></thead>
                        <tbody id="lista-utilizadores-body"></tbody>
                    </table>
                </div>
            </section>
        </main>
        
        <!-- RODAPÉ DO PAINEL -->
        <footer class="main-content-footer">
            <p>&copy; 2025 E-Pra-Já. Painel de Gestão.</p>
        </footer>
    </div>

    <!-- OVERLAY PARA O FUNDO DO MENU MÓVEL -->
    <div class="overlay" id="overlay"></div>
    
    <!-- MODAL DE GERENCIAMENTO DE ACESSO -->
    <div class="modal-overlay" id="modal-acesso">
        <div class="modal-container">
            <header class="modal-header">
                <h3>Gerenciar Acesso de: <span id="nome-restaurante-modal"></span></h3>
                <button id="fechar-modal-acesso-btn" class="btn-fechar-modal">&times;</button>
            </header>
            <form id="form-acesso">
                <input type="hidden" id="restaurante-id-acesso">
                <div class="form-group">
                    <label for="dias">Conceder acesso por quantos dias?</label>
                    <input type="number" id="dias" name="dias" value="30" required>
                    <small>Use 7 para teste, 30 para mensalidade, 36500 para vitalício.</small>
                </div>
                <button type="submit" class="btn btn-primario" style="width: 100%;">Atualizar Acesso</button>
            </form>
        </div>
    </div>

    <script type="module" src="admin.js?v=4.1"></script>
</body>
</html>

